<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
      <title>Budget App Prototype</title>
      <link rel="stylesheet" href="./styles/main.css" />
   </head>
   <body>
      <!-- Tablet -->
      <main class="phone">
         <div id="panels" class="panels">
         <section id="panel-home" class="panel show">
            <header class="header">
               <h1 class="home-hello">Home</h1>
            </header>
            <!-- Content Container -->
            <div class="content scroll">
               <!-- Home Page -->
               <div class="home-meta">
                  <div class="home-range">
                     <span >Today</span>
                     <span class="is-active">Week</span>
                     <span>Month</span>
                     <span>Year</span>
                  </div>
               </div>
               <div class="home-budget-title">Daily Budget: $100</div>
               <div class="donut-wrap">
                  <svg width="180" height="180" viewBox="0 0 180 180" role="img" aria-label="70 percent">
                     <circle cx="90" cy="90" r="70" fill="none" stroke="#e2e8f0" stroke-width="20"></circle>
                     <circle cx="90" cy="90" r="70" fill="none" stroke="#0b5fff" stroke-width="20"
                        stroke-dasharray="307 440" stroke-linecap="round"
                        transform="rotate(-90 90 90)"></circle>
                     <text x="90" y="98" text-anchor="middle" font-size="36" font-weight="800" fill="currentColor">70%</text>
                  </svg>
               </div>
               <p class="home-status">
                  You are under your daily budget of $100 at 70%.<br/>
                  Great job being fiscally responsible!
               </p>
               <button id="home-latest-txn" class="home-latest-txn" type="button">
                  <p class="txn-label">Most Recent Transaction:</p>
                  <div class="txn-summary">
                     <span class="txn-cat">—</span>
                     <span class="txn-amt">—</span>
                     <span class="txn-date">—</span>
                  </div>
               </button>
            </div>
         </section>
         <!-- BUDGET Tab-->
        <section id="panel-budget" class="panel">
  <header class="header">
    <h1>Budget</h1>
  </header>
  <div class="content scroll">
    <p class="out"></p>
    <div class="home-range">
      <span id="budget-daily">Daily</span>
      <span id="budget-monthly">Monthly</span>
      <span id="budget-yearly">Yearly</span>
    </div>
    <div class="budget-table">
      <p id="budget-overview"></p>
    </div>
    <section id="savings-section">
      <h2>Savings Goal</h2>
      <div id="savings-overview"></div>
    </section>
  </div>
</section>
<!-- SPENDING / ACTIVITY tab -->
<section id="panel-spending" class="panel">
  <header class="header">
    <!-- renamed from "Spending" to "Activity" to reflect expenses + income -->
    <h1>Activity</h1>
  </header>
  <div class="content scroll">
    <div class="txn-toolbar">
      <!-- clearer title than just "Transactions" -->
      <h2 class="txn-title">Spending & Income</h2>
      <div class="seg" id="txn-filter-seg">
        <button class="seg-btn is-selected" type="button" data-filter="all" aria-pressed="true">All</button>
        <button class="seg-btn" type="button" data-filter="expense" aria-pressed="false">Expenses</button>
        <button class="seg-btn" type="button" data-filter="income" aria-pressed="false">Income</button>
      </div>
    </div>

    <!-- NEW: scalable filters / sorting row -->
    <div class="txn-subtoolbar">
      <div class="txn-filter-group">
        <label for="txn-filter-category">Category</label>
        <select id="txn-filter-category">
          <option value="all">All categories</option>
        </select>
      </div>

      <div class="txn-filter-group">
        <label for="txn-filter-date">Date</label>
        <select id="txn-filter-date">
          <option value="all">All time</option>
          <option value="last7">Last 7 days</option>
          <option value="last30">Last 30 days</option>
        </select>
      </div>

      <div class="txn-filter-group">
        <label for="txn-sort">Sort</label>
        <select id="txn-sort">
          <option value="date-desc">Date (newest)</option>
          <option value="date-asc">Date (oldest)</option>
          <option value="amount-desc">Amount (high → low)</option>
          <option value="amount-asc">Amount (low → high)</option>
        </select>
      </div>
    </div>

    <div class="txn-add-row" style="margin:6px 0 12px;">
      <button id="txn-open-form" class="btn" type="button" aria-label="Add transaction">Add Transaction</button>
    </div>

    <!-- Recent transactions list -->
    <div id="txn-list" class="txn-list" role="list" aria-label="Recent transactions"></div>
  </div>
</section>

         <!-- ANALYTICS tab -->
         <section id="panel-analytics" class="panel">
            <header class="header">
               <h1>Analytics</h1>
            </header>
            <div class="content">
            <!-- Placeholders -->
            <div class="graph-placeholder" aria-label="Category breakdown">
            <div class="spending-pie-title">
               <h2 class="spending-pie-header">Spending Breakdown</h2>
               <canvas id="category-pie" width="260" height="260"></canvas>
               <ul id="category-legend"></ul>
            </div>
            <div class="spending-graph-title">
               <h2 class="spending-graph-header">Spending Trends Overtime</h2>
               <div class="spending-meta">
                  <div class="spending-range">
                     <span data-range="week" class="is-active">Week</span>
                     <span data-range="month">Month</span>
                     <span data-range="year">Year</span>
                  </div>
               </div>
               <!--legend-->
               <ul class="trend-legend">
                  <li><span class="trend-up"></span> Spending Decrease (Good)</li>
                  <li><span class="trend-down"></span> Spending Increase (Bad)</li>
               </ul>
               <div class="spending-graph-wrap">
                  <canvas id="spending-graph" width="450" height="180"></canvas>
               </div>
            </div>
         </section>
         <!-- PROFILE tab -->
         <section id="panel-profile" class="panel">
            <header class="header">
               <h1>Profile</h1>
            </header>
            <div class="profile-content">
               <div>
                  <div class="pfp-wrap">
                     <img id="profile-avatar" class="pfp-icon" src="./assets/icons/pfp.png" alt="Profile picture" />
                     <button id="pfp-edit" class="pfp-edit" type="button" aria-label="Edit profile picture">
                     <img src="./assets/icons/pencil.png" alt="" aria-hidden="true" onerror="this.replaceWith(document.createTextNode('✎'))">
                     </button>
                     <div id="avatar-popover" class="avatar-popover" hidden role="dialog" aria-label="Choose an avatar">
                        <button type="button" class="avatar-opt" data-avatar="crab.png"      aria-label="Crab"><img src="./assets/icons/crab.png"      alt=""></button>
                        <button type="button" class="avatar-opt" data-avatar="jellyfish.png" aria-label="Jellyfish"><img src="./assets/icons/jellyfish.png" alt=""></button>
                        <button type="button" class="avatar-opt" data-avatar="fox.png"       aria-label="Fox"><img src="./assets/icons/fox.png"       alt=""></button>
                        <button type="button" class="avatar-opt" data-avatar="koala.png"     aria-label="Koala"><img src="./assets/icons/koala.png"     alt=""></button>
                     </div>
                  </div>
               </div>
               <h1>Account & Preferences</h1>
               <table class="budgets" id="profile-form">
                  <tr>
                     <td>Name:</td>
                     <td><input id="pf-name" class="input" type="text" disabled></td>
                  </tr>
                  <tr>
                     <td>Yearly Income:</td>
                     <td><input id="pf-income" class="input" type="number" step="100" min="0" disabled></td>
                  </tr>
                  <tr>
                     <td>Email:</td>
                     <td><input id="pf-email" class="input" type="email" disabled></td>
                  </tr>
                  <tr>
                     <td>Phone:</td>
                     <td><input id="pf-phone" class="input" type="tel" disabled></td>
                  </tr>
                  <tr>
                     <td>City:</td>
                     <td><input id="pf-city" class="input" type="text" disabled></td>
                  </tr>
                  <tr>
                     <td>Preferred Currency:</td>
                     <td>
                        <select id="pf-currency" class="input" disabled>
                           <option value="USD">$ USD</option>
                           <option value="EUR">€ EUR</option>
                           <option value="GBP">£ GBP</option>
                           <option value="INR">₹ INR</option>
                        </select>
                     </td>
                  </tr>
               </table>
               <!-- One of these is visible at a time -->
               <div class="profile-actions">
                  <button id="pf-save"  class="btn" hidden>Save</button>
                  <button id="pf-edit"  class="btn">Edit</button>
               </div>
         </section>
         </div>
         <!-- bottom nav -->
         <nav class="tabs">
            <button data-tab="home" class="tab active" aria-label="Home">
            <img class="icon" src="./assets/icons/home.png" alt="">
            <span>Home</span>
            </button>
            <button data-tab="budget" class="tab" aria-label="Budget">
            <img class="icon" src="./assets/icons/money-bag.png" alt="">
            <span>Budget</span>
            </button>
            <button data-tab="spending" class="tab" aria-label="Activity">
            <img class="icon" src="./assets/icons/earnings.png" alt="">
            <span>Activity</span>
            </button>
            <button data-tab="analytics" class="tab" aria-label="Analytics">
            <img class="icon" src="./assets/icons/data-analytics.png" alt="">
            <span>Analytics</span>
            </button>
            <button data-tab="profile" class="tab" aria-label="Profile">
            <img class="icon" src="./assets/icons/user-list-icon.png" alt="">
            <span>Profile</span>
            </button>
         </nav>
      </main>
      <!-- notice, might delete later -->
      <div id="notice" class="notice" hidden>
         <div class="notice-box">
            <p>Heads up — this is a prototype notice.</p>
            <button id="notice-close" class="btn" type="button">Close</button>
         </div>
      </div>
      <script src="./scripts/main.js" defer></script>
      <!-- Add Transaction modal dialog -->
<div id="add-form-wrap" class="txn-modal" hidden role="dialog" aria-modal="true" aria-labelledby="txn-modal-title">
  <div class="txn-modal-backdrop"></div>
  <div class="txn-modal-box">
    <div class="txn-modal-header">
      <h2 id="txn-modal-title">Add Transaction</h2>
      <button id="txn-modal-close" class="txn-modal-close" type="button" aria-label="Close add transaction dialog">
        &times;
      </button>
    </div>
    <form id="txn-form" class="txn-form" autocomplete="off">
      <div class="row">
        <label class="visually-hidden" for="txn-type">Type</label>
        <select id="txn-type" required>
          <option value="expense">Expense</option>
          <option value="income">Income</option>
        </select>
        <label class="visually-hidden" for="txn-amount">Amount</label>
        <input id="txn-amount" type="number" step=".01" min="0" placeholder="Amount" required />
      </div>
      <div class="row">
        <label class="visually-hidden" for="category">Category</label>
        <select id="category" name="category" required>
          <option value="">Choose a category</option>
          <!-- clarified Housing vs Bills & Utilities, and added a generic catch-all -->
          <option value="Housing & Utilities">Housing & Utilities</option>
          <option value="Dining & Entertainment">Dining & Entertainment</option>
          <option value="Education & Business">Education & Business</option>
          <option value="Groceries">Groceries</option>
          <option value="Savings & investment">Savings & investment</option>
          <option value="Shopping & Personal Care">Shopping & Personal Care</option>
          <option value="Transportation">Transportation</option>
          <option value="Miscellaneous">Miscellaneous</option>
        </select>
        <label class="visually-hidden" for="txn-date">Date</label>
        <input id="txn-date" type="date" required />
      </div>

      <div class="row">
        <label class="visually-hidden" for="txn-note">Note</label>
        <input id="txn-note" type="text" placeholder="Note (optional)" />
        <div style="display:flex; gap:8px;">
          <button id="txn-add" class="btn" type="submit">Add</button>
          <button id="txn-cancel" class="btn btn-ghost" type="button">Cancel</button>
        </div>
      </div>

      <!-- NEW: basic recurring transaction support -->
      <div class="txn-recurring-row">
        <label>
          <input id="txn-recurring" type="checkbox" />
          Repeat this transaction
        </label>
        <select id="txn-frequency" disabled>
          <option value="weekly">Weekly</option>
          <option value="biweekly">Every 2 weeks</option>
          <option value="monthly">Monthly</option>
        </select>
      </div>
    </form>
  </div>
</div>

   </body>
</html>